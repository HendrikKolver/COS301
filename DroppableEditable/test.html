<!DOCTYPE html>
<html>
    <head>
        <title>jQuery Snap!</title> 
        <script type ="text/javascript" src ="jquery.js"></script>
        <script type = "text/javascript" src="jqueryui.js"></script>
        <style>
            .draggable{
                width:270px;
                height:270px;
                background-color:gold; 
		text-align:center;
            }
	.snapHere{
		width:270px;
		height:270px;
		border: 5px solid black;
	}
	.ta{
		font-family:Arial;
		background-color: transparent;
		border: 0;
		resize:none;
	}
	
	.content{
		text-align:left; 
		width:250px; 
		height:220px; 
		padding:10px; 
		font-family:Arial;
	}

        </style>
        <script>
	$(document).ready(function()
	{	
		/*Called every time the text area is changed, TODO: Update with WebSockets*/
		$('.ta').bind('input propertychange', function() {
			//alert($(this).val());
		});
			   
                $(".draggable").draggable();
		$('.snapHere').droppable({
		   drop: function(ev, ui) 
		   {
			$(ui.draggable).offset({ top: ($(this).offset().top+5), left: ($(this).offset().left+5)});
		    }
		});
		
		$(".edit").prev().children(":first").hide();
		$(".edit").prev().children(":nth-child(2)").html($(".edit").prev().children(":first").val());		
		$(".edit").click(function()
		{
			if ($(this).text() == "Edit")
			{
				$(this).text("Done Editting");
				$(this).prev().children(":first").show();
				$(this).prev().children(":first").val($(this).prev().children(":nth-child(2)").text());
				$(this).prev().children(":nth-child(2)").hide();
				$(".ta").focus();
			}else
			{
				$(this).prev().children(":nth-child(2)").show();
				$(this).text("Edit");
				$(this).prev().children(":first").hide();
				$(this).prev().children(":nth-child(2)").html($(this).prev().children(":first").val());
			}
		});
            });
            
        </script>
    </head>
    <body>
    
	<table id = "snaptarget">
		<tr>
			<td class="snapHere"></td>
			<td class="snapHere"></td>
		</tr>
		
		<tr>
			<td class="snapHere"></td>
			<td class="snapHere"></td>
		</tr>
		
	</table>
	  
        <div class ="draggable">
		<div class = "content">
			<textarea id = "textareaID" class = 'ta' rows = '12' cols = '26'>Your Text Here...</textarea>
			<div class = 'replaced'>
			</div>
		</div>	
		<button class = 'edit'>Edit</button>
        </div>
    </body>
</html>