<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core">
      
    <h:head>
        <link href="icon.jpg" rel="shortcut icon"/>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <link href="resources/css/cssLayout.css" rel="stylesheet" type="text/css" />
        <link rel="stylesheet" href="resources/css/accordion.css"/>
        <script type ="text/javascript" src ="resources/javascript/jquery.js"></script>
        <script type = "text/javascript" src="resources/javascript/jqueryui.js"></script>
        <script type = "text/javascript" src="resources/javascript/highcharts.js"></script>
        <script type = "text/javascript" src="resources/javascript/exporting.js"></script>
        <script type = "text/javascript" src="resources/javascript/video.js"></script>
        <script src="https://webrtc-experiment.appspot.com/firebase.js"> </script>
        <script src="resources/javascript/meeting.js"> </script>
        <script>
            var hash = window.location.hash.replace('#', '');
            if (!hash.length) location.href = location.href + '#meeting-roomid-' + ((Math.random() * new Date().getTime()).toString(36).toLowerCase().replace( /\./g , '-'));
        </script>
        

        <title>Distributed Scrum Teamboard</title>
    </h:head>
    <h:body>
            <h:outputText value="#{syncServer.startChat()}" />
             <h:outputText value="#{syncServer.startPlanningPoker()}" />
             <h:outputText value="#{syncServer.startServer()}" />
        <div id = 'container1' >
            <div id = 'header'>
                    <span id = 'logo'><img src = 'resources/images/logo.png' title = 'Distributed Scrum Board' height = '70px'/></span>
                    <span id = 'logo2'><img src = 'resources/images/epiuse.png' title = 'Epi-Use' height = '40px'/></span>
                    <!--<a href="./AdminResource">Login</a><br />
                    <a href="./LogoutServlet">Log out</a><br />-->
            </div>

        <div id = 'navContainer'>
                <table id = 'nav'>
                        <tr>
                            <h:form id="navForm">
                                <td>
                                    <h:commandButton class="navLink" value="Scrum Page"  action="#{navBean.changeScrum('scrum.xhtml')}">
                                        <f:ajax  render=":editdivParent"></f:ajax>
                                    </h:commandButton>
                                </td>
                                <td>
                                    <h:commandButton class="navLink" id="navBacklog" value="Project Backlog"  action="#{navBean.changeScrum('projectBacklog.xhtml')}">
                                        <f:ajax  render=":editdivParent"></f:ajax>
                                    </h:commandButton>
                                </td>
                                <td><h:commandButton class="navLink" value="Planning Poker"  action="#{navBean.changeScrum('planningPoker.xhtml')}">
                                        <f:ajax  render=":editdivParent"></f:ajax>
                                    </h:commandButton></td>
                                <td><h:commandButton class="navLink" value="Video Chat" action="video"/></td>
                                <td><div id="StartChat" class = 'navLink'>LinkChat</div></td>

                            </h:form>
                        </tr>
                </table>
            
            <div style="margin-right:30px; max-width: 270px; float: right; color:white; margin-top: -30px;">
                Logged in as: <b>${user.getUsername()}</b><br/>
                <button id ="logOut" style ="float:right; margin-top: 5px;">Log Out</button>
                <a style="display:none" id ="logOutHref" href="./LogoutServlet">Log out</a>
            </div>
        </div>
            
            
            <script>
                $(document).ready(function()
                {
                    $("#logOut").click(function()
                    {
                        
                        window.location = $('#logOutHref').attr('href');
                    });
                    
                    
                });
            </script>


            <div id="body">
                <h:panelGroup id="editdivParent" layout="block">
                    <h:panelGroup id="scrumDiv" rendered="#{navBean.scrumPage}" layout="block">
                        <ui:include src="#{navBean.pageToLoad}">
                            
                        </ui:include>
                    </h:panelGroup>
                </h:panelGroup>
            </div>
            
            
            <div id ="onBottom">

                <div id="videoWindow">
                    <div id ="videoWindowtop" style ="height:40px;">
                    </div>
                    
                    <table id ="chatTable" style="width:100%">
                        <tr>
                            <td>
                                <div id="videoLoad" style ="width: 100%; margin: 0 auto"> 
                                </div>
                            </td>
                            <td style="width:242px; height:100%; border-left: 2px solid rgb(107,107,107);">
                                <div style ="position: relative; top:-60px;">
                                    
                                    <div style ="width:246px;">
                                    </div>
                                    
                                    <div id ="textChatHeader" style="height:30px; line-height: 30px; width:220px;">
                                        Name: <input style="max-width:130px;" type ="text" id ="chatName"/>
                                    </div>
                                    <div id ="textChatSection" style="height:210px; width:220px;">
                                    </div> 
                                    <div id ="textChatInputSection" style="height:75px; width:220px;">
                                        <textarea id ="clientMsg" style ="resize: none; height:40px;" rows="2" cols="20"></textarea>
                                        <br/>
                                        <button id ="textChatSend">Send</button>
                                    </div>
                                </div>
                               
                            </td>
                        </tr>
                    </table>
                </div>
                
                
                    <div id="videoOptions">
                        <div id ="chatNowBtn">Group Chat</div>
                    </div>
                
            </div>
            
            
            <!--<div id = 'footer1'>
            </div>
            <div id = 'footer2'>
                    <br/>RHM Software Solutions 2013
            </div>-->
            
                <h:form id="form2" style="display:none"> 
                    <h:commandButton id='testButton' action="#{index.updateID()}"> 
                      <f:ajax execute="@form"/>
                  </h:commandButton>
                </h:form>
                
                <h:form id="form" style="display:none">
                   <h:inputText id="updateID" value="#{index.updateID}"/>
                    <h:commandButton id='updateForm' action="#{index.update()}"> 
                      <f:ajax execute="@form"/>
                  </h:commandButton>
                </h:form>
                
                <h:form id="form3" style="display:none">
                   <h:inputText id="deleteID" value="#{index.deleteID}"/>
                    <h:commandButton id='deleteForm' action="#{index.delete()}"> 
                      <f:ajax execute="@form"/>
                  </h:commandButton>
                </h:form>
            
                <h:form id="videoForm" style="display:none">
                   <h:inputText id="addressID" value="#{videoLink.address}"/>
                    <h:commandButton id='addressClick' action="#{videoLink.demoFunct()}"> 
                      <f:ajax execute="@form"/>
                  </h:commandButton>
                </h:form>
		
		<h:form id="videoStart" style="display:none">
                   <h:inputText id="videoID" value="#{videoLink.serverStarted}"/>
                    <h:commandButton id='videoClick' action="#{videoLink.demoFunct()}"> 
                      <f:ajax execute="@form"/>
                  </h:commandButton>
                </h:form>
                
                <h:form id="addTaskProjectBacklog" style="display:none">
                    <h:inputText id="taskNameAdd" value="#{projectBean.taskName}"/>
                    <h:inputText id="personResponsibleAdd" value="#{projectBean.personResponsible}"/>
                    <h:inputText id="descriptionAdd" value="#{projectBean.description}"/>
                    <h:commandButton id='addTaskClick' action="#{projectBean.updateDB()}"> 
                      <f:ajax execute="@form"/>
                  </h:commandButton>
                </h:form>
            
                <h:form id="updateLastTaskForm" style="display:none"> 
                    <h:commandButton id='updateLastTask' action="#{index.updateLastTask()}"> 
                      <f:ajax execute="@form"/>
                      
                  </h:commandButton>
                </h:form>
            
                <h:form id="updateSpecificTask" style="display:none">
                    <h:inputText id="updateProjectID" value="#{projectBean.projectID}"/>
                    <h:inputText id="updateProjectIDIndex" value="#{index.updateID}"/>
                    <h:inputText id="updateTaskName" value="#{projectBean.editTaskName}"/>
                    <h:inputText id="updatePersonResponsible" value="#{projectBean.editPersonResponsible}"/>
                    <h:inputText id="updateDescription" value="#{projectBean.editDescription}"/>
                    <h:inputText id="updateStoryPoints" value="#{projectBean.storyPoints}"/>
                    <h:inputText id="updateDaysLeft" value="#{projectBean.daysLeft}"/>
                    <h:commandButton id='updateSpecificTaskButton' action="#{index.update()}"> 
                      <f:ajax execute="@form"/>
                      
                  </h:commandButton>
                </h:form>
            
            <h:form id="updateAddRemoveSprint" style="display:none">
                <h:inputText id="updateTaskID" value="#{projectBean.taskID}"/>
                <h:commandButton id='updateAddRemoveTaskButton' action="#{index.update()}"> 
                    <f:ajax execute="@form"/>
                </h:commandButton>
            </h:form>
            
            <h:outputText value="#{index.getAllTasks()}" />
            
            
            
            
             <script type ="text/javascript" src="resources/javascript/planningPoker.js"></script>
             <script type ="text/javascript" src="resources/javascript/scrumPage.js"></script>
             <script type = "text/javascript" src="resources/javascript/chat.js"></script>
            
        </div>
    </h:body>
</html>
