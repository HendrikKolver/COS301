<html>
  <body>
  <style>
#makeMeDraggable 
{ 
	width: 300px; height: 300px; background: red; 
	box-shadow: 4px 4px 2px grey;
}

</style>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.3/jquery.min.js"></script>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.9/jquery-ui.min.js"></script>
  

<div id="content">
  <div id="makeMeDraggable"> </div>
</div>


    <script>
    
      function showMessage(text) {
	var chars = text.split(',');
	var text = (chars[0] +',' + chars[1]);

	$("#makeMeDraggable").css({top: chars[0] + "px"});
	$("#makeMeDraggable").css({left: chars[1] + "px"});
	
      }

      var ws = new WebSocket('ws://' +'localhost:8080'+ '/hellowebsocket');
      showMessage('Connecting...');
      ws.onopen = function() { showMessage('Connected!'); };
      ws.onclose = function() { showMessage('Lost connection'); };
      ws.onmessage = function(msg) { showMessage(msg.data); };
      
$( init );
 
function init() {
var dragger = 0;
  $('#makeMeDraggable').draggable( {
    cursor: 'move',
    containment: 'document',
    drag: function() {
            
	var $this = $(this);
	var thisPos = $this.position();
	var parentPos = $this.parent().position();

	var y = thisPos.left - parentPos.left;
	var x = thisPos.top - parentPos.top;
		
	if(dragger > 1)
	{
		ws.send(x + "," + y + "," +$this.attr('id'));
		dragger = 0;
	}
	
	dragger++;
        }
  } );
}
 

</script>
    
  </body>
</html>